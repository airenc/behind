{"remainingRequest":"D:\\后台管理项目资料\\我的后台\\node_modules\\babel-loader\\lib\\index.js!D:\\后台管理项目资料\\我的后台\\src\\http\\request.js","dependencies":[{"path":"D:\\后台管理项目资料\\我的后台\\src\\http\\request.js","mtime":1622981617643},{"path":"D:\\后台管理项目资料\\我的后台\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\后台管理项目资料\\我的后台\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBBeGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmltcG9ydCBxcyBmcm9tICJxcyI7IC8vwqBpbXBvcnTCoFZ1ZcKgZnJvbcKgInZ1ZSI7Cgp2YXIgYmFzZVVSTCA9ICJodHRwOi8vMTI3LjAuMC4xOjg4ODgvYXBpL3ByaXZhdGUvdjEvIjsKdmFyIGluc3RhbmNlID0gQXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBiYXNlVVJMLAogIHRpbWVvdXQ6IDIwMDAgLy/otoXml7bml7bpl7QKCn0pOwppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChzdG9yZS5zdGF0ZS50b2tlbikgewogICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHN0b3JlLnN0YXRlLnRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOyAvL+i/meaYr3Byb21pc2XnmoTkuIDkuKrmlrnms5XvvIzmiafooYznmoTnu5PmnpzmmK/kuIDkuKpwcm9taXNl77yM6ICM5LiU5Lya56uL5Yi75omn6KGMY2F0Y2jmlrnms5XvvIzlubbmiorlj4LmlbDkvKDliLBjYXRjaOmHjAp9KTsgLy/or7fmsYLmi6bmiKoKCmluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgaWYgKHJlc3BvbnNlLmRhdGEubXNnID09ICLml6DmlYh0b2tlbiIpIHsKICAgIHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICB9CgogIHJldHVybiByZXNwb25zZTsKfSwgZnVuY3Rpb24gKGVycikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsgLy/lk43lupTmi6bmiKoKCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGh0dHAodXJsLCBtZXRob2QpIHsKICB2YXIgZGF0YSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307CiAgcmV0dXJuIGluc3RhbmNlKHsKICAgIHVybDogdXJsLAogICAgbWV0aG9kOiBtZXRob2QsCiAgICBkYXRhOiBxcy5zdHJpbmdpZnkoZGF0YSksCiAgICBwYXJhbXM6IHBhcmFtcwogIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmV0dXJuIHJlczsKICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKICB9KTsKfQ=="},{"version":3,"sources":["D:/后台管理项目资料/我的后台/src/http/request.js"],"names":["Axios","router","store","qs","baseURL","instance","create","timeout","interceptors","request","use","config","state","token","headers","Authorization","err","Promise","reject","response","data","msg","push","http","url","method","params","stringify","then","res","catch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,OAAOC,EAAP,MAAe,IAAf,C,CAEA;;AAEA,IAAIC,OAAO,GAAG,uCAAd;AAEA,IAAMC,QAAQ,GAAGL,KAAK,CAACM,MAAN,CAAa;AAC5BF,EAAAA,OAAO,EAAPA,OAD4B;AAG5BG,EAAAA,OAAO,EAAE,IAHmB,CAGb;;AAHa,CAAb,CAAjB;AAMAF,QAAQ,CAACG,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACE,UAASC,MAAT,EAAiB;AACf,MAAIT,KAAK,CAACU,KAAN,CAAYC,KAAhB,EAAuB;AACrBF,IAAAA,MAAM,CAACG,OAAP,CAAeC,aAAf,GAA+Bb,KAAK,CAACU,KAAN,CAAYC,KAA3C;AACD;;AAED,SAAOF,MAAP;AACD,CAPH,EASE,UAASK,GAAT,EAAc;AACZ,SAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP,CADY,CACgB;AAC7B,CAXH,E,CAcA;;AAEAX,QAAQ,CAACG,YAAT,CAAsBW,QAAtB,CAA+BT,GAA/B,CACE,UAASS,QAAT,EAAmB;AACjB,MAAIA,QAAQ,CAACC,IAAT,CAAcC,GAAd,IAAqB,SAAzB,EAAoC;AAClCpB,IAAAA,MAAM,CAACqB,IAAP,CAAY,QAAZ;AACD;;AACD,SAAOH,QAAP;AACD,CANH,EAQE,UAASH,GAAT,EAAc;AACZ,SAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,CAVH,E,CAaA;;AAEA,eAAe,SAASO,IAAT,CAAcC,GAAd,EAAmBC,MAAnB,EAAmD;AAAA,MAAxBL,IAAwB,uEAAjB,EAAiB;AAAA,MAAbM,MAAa,uEAAJ,EAAI;AAChE,SAAOrB,QAAQ,CAAC;AACdmB,IAAAA,GAAG,EAAEA,GADS;AAGdC,IAAAA,MAAM,EAAEA,MAHM;AAKdL,IAAAA,IAAI,EAAEjB,EAAE,CAACwB,SAAH,CAAaP,IAAb,CALQ;AAOdM,IAAAA,MAAM,EAAEA;AAPM,GAAD,CAAR,CASJE,IATI,CASC,UAACC,GAAD,EAAS;AACb,WAAOA,GAAP;AACD,GAXI,EAaJC,KAbI,CAaE,UAACd,GAAD,EAAS;AACd,WAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,GAfI,CAAP;AAgBD","sourcesContent":["import Axios from \"axios\";\n\nimport router from \"@/router\";\n\nimport store from \"@/store\";\n\nimport qs from \"qs\";\n\n// import Vue from \"vue\";\n\nlet baseURL = \"http://127.0.0.1:8888/api/private/v1/\";\n\nconst instance = Axios.create({\n  baseURL,\n\n  timeout: 2000, //超时时间\n});\n\ninstance.interceptors.request.use(\n  function(config) {\n    if (store.state.token) {\n      config.headers.Authorization = store.state.token;\n    }\n\n    return config;\n  },\n\n  function(err) {\n    return Promise.reject(err); //这是promise的一个方法，执行的结果是一个promise，而且会立刻执行catch方法，并把参数传到catch里\n  }\n);\n\n//请求拦截\n\ninstance.interceptors.response.use(\n  function(response) {\n    if (response.data.msg == \"无效token\") {\n      router.push(\"/login\");\n    }\n    return response;\n  },\n\n  function(err) {\n    return Promise.reject(err);\n  }\n);\n\n//响应拦截\n\nexport default function http(url, method, data = {}, params = {}) {\n  return instance({\n    url: url,\n\n    method: method,\n\n    data: qs.stringify(data),\n\n    params: params,\n  })\n    .then((res) => {\n      return res;\n    })\n\n    .catch((err) => {\n      return Promise.reject(err);\n    });\n}\n"]}]}